{"version":3,"file":"RAFManager.min.js","sources":["../src/RAFManager.js"],"sourcesContent":["/**\n *  RAFManager requestAnimationFrame Manager\n *\n *  Simple package\n *\n *  CODE:\n *\n * \t\t// Add to\n *  \t-- RAFManager.add(func);\n *\n *   \t// Add and carry parameters\n *  \t-- const func = data =>{ console.log(data) };\n *  \t-- RAFManager.add(func, 25, { msg:'hello world!' });\n *\n * \t\t// remove\n *  \t-- RAFManager.remove(func);\n *  \t-- RAFManager.stop();\n */\n\n// simple polyfill by https://gist.github.com/paulirish/1579671\n(function () {\n  let lastTime = 0;\n  let vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\n  for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"];\n    window.cancelAnimationFrame =\n      window[vendors[x] + \"CancelAnimationFrame\"] ||\n      window[vendors[x] + \"CancelRequestAnimationFrame\"];\n  }\n})();\n\nconst RAFManager = {\n  timer: 0,\n  state: \"stop\",\n  animations: [],\n\n  add(callback, fps = 60, param = null) {\n    const n = 60 / fps;\n    const aniData = { callback, fps, n, param, i: 0 };\n    this.animations.push(aniData);\n    if (this.animations.length >= 1) this.start();\n\n    return this;\n  },\n\n  getIndex(callback) {\n    for (let i = 0; i < this.animations.length; i++) {\n      const aniData = this.animations[i];\n      if (aniData.callback === callback) return i;\n    }\n\n    return -1;\n  },\n\n  remove(callback) {\n    const index = this.getIndex(callback);\n    if (index < 0) return;\n\n    this.deleteMap(callback);\n    if (this.animations.length === 0) this.stop();\n\n    return this;\n  },\n\n  deleteMap(callback) {\n    const index = this.getIndex(callback);\n    const aniData = this.animations[index];\n    for (let key in aniData) delete aniData[key];\n\n    this.animations.splice(index, 1);\n  },\n\n  start() {\n    if (this.state === \"start\") return;\n\n    this.state = \"start\";\n    this.tick();\n    return this;\n  },\n\n  stop() {\n    if (this.state === \"stop\") return;\n\n    this.state = \"stop\";\n    cancelAnimationFrame(this.timer);\n    return this;\n  },\n\n  tick() {\n    this.timer = requestAnimationFrame(() => {\n      this.tick();\n    });\n\n    for (let i = 0; i < this.animations.length; i++) {\n      const aniData = this.animations[i];\n      const callback = aniData.callback;\n      const param = aniData.param;\n\n      aniData.i++;\n      if (aniData.i >= aniData.n) {\n        callback(param);\n        aniData.i = 0;\n      }\n    }\n  },\n};\n\nexport default RAFManager;\n"],"names":["vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","fps","aniData","n","param","i","animations","push","this","start","getIndex","deleteMap","stop","index","key","splice","state","tick","timer"],"mappings":";;;;;;;;6LAoBA,mBAEMA,GAAW,KAAM,MAAO,SAAU,KAC7BC,EAAI,EAAGA,EAAID,EAAQE,SAAWC,OAAOC,wBAAyBH,SAC9DG,sBAAwBD,OAAOH,EAAQC,GAAK,gCAC5CI,qBACLF,OAAOH,EAAQC,GAAK,yBACpBE,OAAOH,EAAQC,GAAK,+BAP1B,UAYS,QACA,kCAGHK,OAAUC,yDAAM,GAEZC,GAAYF,WAAUC,MAAKE,EADvB,GAAKF,EACqBG,6DAFN,KAEaC,EAAG,eACzCC,WAAWC,KAAKL,GACjBM,KAAKF,WAAWV,QAAU,GAAGY,KAAKC,QAE/BD,wBAGAR,OACF,IAAIK,EAAI,EAAGA,EAAIG,KAAKF,WAAWV,OAAQS,IAAK,IAC/BG,KAAKF,WAAWD,GACpBL,WAAaA,EAAU,OAAOK,SAGpC,mBAGHL,QACSQ,KAAKE,SAASV,GAChB,eAEPW,UAAUX,GACgB,IAA3BQ,KAAKF,WAAWV,QAAcY,KAAKI,OAEhCJ,yBAGCR,OACFa,EAAQL,KAAKE,SAASV,GACtBE,EAAUM,KAAKF,WAAWO,OAC3B,IAAIC,KAAOZ,SAAgBA,EAAQY,GAExCN,KAAKF,WAAWS,OAAOF,EAAO,wBAIX,UAAfL,KAAKQ,kBAEJA,MAAQ,aACRC,OACET,yBAIY,SAAfA,KAAKQ,kBAEJA,MAAQ,4BACQR,KAAKU,OACnBV,sCAIFU,MAAQpB,sBAAsB,aAC5BmB,aAGF,IAAIZ,EAAI,EAAGA,EAAIG,KAAKF,WAAWV,OAAQS,IAAK,KACzCH,EAAUM,KAAKF,WAAWD,GAC1BL,EAAWE,EAAQF,SACnBI,EAAQF,EAAQE,QAEdC,IACJH,EAAQG,GAAKH,EAAQC,MACdC,KACDC,EAAI"}